Date: Tue, 20 Sep 2016 09:12:01 +0800
Message-ID: <00021650$c8ec0b10$f57beb78$EverNote>
MIME-Version: 1.0
Content-Type: text/html; 
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: EvernoteÂ® v6.02.4.3244

<html>
<head>
  <title>Evernote Export</title>
  <basefont face=3D"=E5=BE=AE=E8=BD=AF=E9=9B=85=E9=BB=91" size=3D"2" />
  <meta http-equiv=3D"Content-Type" =
content=3D"text/html;charset=3Dutf-8" />
  <meta name=3D"exporter-version" content=3D"Evernote Windows/303244 =
(zh-CN, DDL); Windows/10.0.10586 (Win64);"/>
  <style>
    body, td {
      font-family: =E5=BE=AE=E8=BD=AF=E9=9B=85=E9=BB=91;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name=3D"4013"/>

<div>=0A<span><div style=3D"-evernote-webclip:true"><br/></div><div =
style=3D"font-size: 16px"><div =
style=3D"box-sizing:border-box;font-family:sans-serif;font-size:10px;-web=
kit-tap-highlight-color:rgba(0, 0, 0, 0);"><div =
style=3D"box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, =
Helvetica, Arial, sans-serif;font-size:14px;color:rgb(51, 51, =
51);background-color:#f5f5f5;"><div =
style=3D"box-sizing:border-box;"><div =
style=3D"box-sizing:border-box;"><div =
style=3D"box-sizing:border-box;"><div =
style=3D"box-sizing:border-box;"><div =
style=3D"box-sizing:border-box;"><div =
style=3D"box-sizing:border-box;border-radius:4px;box-shadow:rgba(0, 0, =
0, 0.0470588) 0px 1px 2px;background-color:rgb(255, 255, 255);"><div =
style=3D"box-sizing:border-box;"><div =
style=3D"box-sizing:border-box;"><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">redis=E6=98=AF=E4=B8=80=E4=B8=AA=E8=91=97=E5=90=8D=E7=9A=84key-val=
ue=E5=AD=98=E5=82=A8=E7=B3=BB=E7=BB=9F=EF=BC=8C=E8=80=8C=E4=BD=9C=E4=B8=BA=
=E5=85=B6=E5=AE=98=E6=96=B9=E6=8E=A8=E8=8D=90=E7=9A=84java=E7=89=88=E5=AE=
=A2=E6=88=B7=E7=AB=AFjedis=E4=B9=9F=E9=9D=9E=E5=B8=B8=E5=BC=BA=E5=A4=A7=E5=
=92=8C=E7=A8=B3=E5=AE=9A=EF=BC=8C=E6=94=AF=E6=8C=81=E4=BA=8B=E5=8A=A1=E3=80=
=81=E7=AE=A1=E9=81=93=E5=8F=8A=E6=9C=89jedis=E8=87=AA=E8=BA=AB=E5=AE=9E=E7=
=8E=B0=E7=9A=84=E5=88=86=E5=B8=83=E5=BC=8F=E3=80=82</p><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=9C=A8=E8=BF=99=E9=87=8C=E5=AF=B9jedis=E5=85=B3=E4=BA=8E=E4=BA=8B=
=E5=8A=A1=E3=80=81=E7=AE=A1=E9=81=93=E5=92=8C=E5=88=86=E5=B8=83=E5=BC=8F=E7=
=9A=84=E8=B0=83=E7=94=A8=E6=96=B9=E5=BC=8F=E5=81=9A=E4=B8=80=E4=B8=AA=E7=AE=
=80=E5=8D=95=E7=9A=84=E4=BB=8B=E7=BB=8D=E5=92=8C=E5=AF=B9=E6=AF=94=EF=BC=9A=
</p><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E4=B8=80=E3=80=81=E6=99=AE=E9=80=9A=E5=90=8C=E6=AD=A5=E6=96=B9=E5=BC=
=8F</h3><p style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E6=9C=80=E7=AE=80=E5=8D=95=E5=92=8C=E5=9F=BA=E7=A1=80=E7=9A=84=E8=
=B0=83=E7=94=A8=E6=96=B9=E5=BC=8F=EF=BC=8C</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test1Normal() {=0A        Jedis jedis =3D new =
Jedis(&quot;localhost&quot;);=0A        long start =3D =
System.currentTimeMillis();=0A        for (int i =3D 0; i &lt; 100000; =
i++) {=0A            String result =3D jedis.set(&quot;n&quot; + i, =
&quot;n&quot; + i);=0A        }=0A        long end =3D =
System.currentTimeMillis();=0A        System.out.println(&quot;Simple =
SET: &quot; + ((end - start)/1000.0) + &quot; seconds&quot;);=0A        =
jedis.disconnect();=0A}=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=BE=88=E7=AE=80=E5=8D=95=E5=90=A7=EF=BC=8C=E6=AF=8F=E6=AC=A1<co=
de style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;font-size:90%;padding:2px =
4px;color:rgb(199, 37, 78);border-radius:4px;background-color:rgb(249, =
242, =
244);">set</code>=E4=B9=8B=E5=90=8E=E9=83=BD=E5=8F=AF=E4=BB=A5=E8=BF=94=E5=
=9B=9E=E7=BB=93=E6=9E=9C=EF=BC=8C=E6=A0=87=E8=AE=B0=E6=98=AF=E5=90=A6=E6=88=
=90=E5=8A=9F=E3=80=82</p><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E4=BA=8C=E3=80=81<span style=3D"color: rgb(50, 135, =
18);">=E4=BA=8B=E5=8A=A1=E6=96=B9=E5=BC=8F(Transactions)</span></h3><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">redis=E7=9A=84=E4=BA=8B=E5=8A=A1=E5=BE=88=E7=AE=80=E5=8D=95=EF=BC=8C=
=E4=BB=96=E4=B8=BB=E8=A6=81=E7=9B=AE=E7=9A=84=E6=98=AF=E4=BF=9D=E9=9A=9C=EF=
=BC=8C=E4=B8=80=E4=B8=AAclient=E5=8F=91=E8=B5=B7=E7=9A=84=E4=BA=8B=E5=8A=A1=
=E4=B8=AD=E7=9A=84=E5=91=BD=E4=BB=A4=E5=8F=AF=E4=BB=A5=E8=BF=9E=E7=BB=AD=E7=
=9A=84=E6=89=A7=E8=A1=8C=EF=BC=8C=E8=80=8C<span style=3D"color: rgb(50, =
135, 18);">=E4=B8=AD=E9=97=B4<span style=3D"background-color: rgb(255, =
250, =
165);-evernote-highlight:true;"><b>=E4=B8=8D=E4=BC=9A=E6=8F=92=E5=85=A5</=
b></span>=E5=85=B6=E4=BB=96client=E7=9A=84=E5=91=BD=E4=BB=A4</span>=E3=80=
=82</p><p style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E7=9C=8B=E4=B8=8B=E9=9D=A2=E4=BE=8B=E5=AD=90=EF=BC=9A</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test2Trans() {=0A        Jedis jedis =3D new =
Jedis(&quot;localhost&quot;);=0A        long start =3D =
System.currentTimeMillis();=0A        Transaction <b><span =
style=3D"color: rgb(50, 135, 18);">tx </span></b>=3D jedis.multi();=0A   =
     for (int i =3D 0; i &lt; 100000; i++) {=0A            <span =
style=3D"color: rgb(50, 135, 18);"><b>tx</b></span>.set(&quot;t&quot; + =
i, &quot;t&quot; + i);=0A        }=0A        List&lt;Object&gt; results =
=3D<span style=3D"background-color: rgb(255, 250, =
165);-evernote-highlight:true;"> <span style=3D"color: rgb(50, 135, =
18);"><b>tx.exec()</b></span>;</span>=0A        long end =3D =
System.currentTimeMillis();=0A        =
System.out.println(&quot;Transaction SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        =
jedis.disconnect();=0A}=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E6=88=91=E4=BB=AC=E8=B0=83=E7=94=A8<code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;font-size:90%;padding:2px =
4px;color:rgb(199, 37, 78);border-radius:4px;background-color:rgb(249, =
242, =
244);">jedis.watch(=E2=80=A6)</code>=E6=96=B9=E6=B3=95=E6=9D=A5=E7=9B=91=E6=
=8E=A7key=EF=BC=8C=E5=A6=82=E6=9E=9C=E8=B0=83=E7=94=A8=E5=90=8Ekey=E5=80=BC=
=E5=8F=91=E7=94=9F=E5=8F=98=E5=8C=96=EF=BC=8C=E5=88=99=E6=95=B4=E4=B8=AA=E4=
=BA=8B=E5=8A=A1=E4=BC=9A=E6=89=A7=E8=A1=8C=E5=A4=B1=E8=B4=A5=E3=80=82=E5=8F=
=A6=E5=A4=96=EF=BC=8C=E4=BA=8B=E5=8A=A1=E4=B8=AD=E6=9F=90=E4=B8=AA=E6=93=8D=
=E4=BD=9C=E5=A4=B1=E8=B4=A5=EF=BC=8C=E5=B9=B6=E4=B8=8D=E4=BC=9A=E5=9B=9E=E6=
=BB=9A=E5=85=B6=E4=BB=96=E6=93=8D=E4=BD=9C=E3=80=82=E8=BF=99=E4=B8=80=E7=82=
=B9=E9=9C=80=E8=A6=81=E6=B3=A8=E6=84=8F=E3=80=82=E8=BF=98=E6=9C=89=EF=BC=8C=
=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E4=BD=BF=E7=94=A8<code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;font-size:90%;padding:2px =
4px;color:rgb(199, 37, 78);border-radius:4px;background-color:rgb(249, =
242, =
244);">discard()</code>=E6=96=B9=E6=B3=95=E6=9D=A5=E5=8F=96=E6=B6=88=E4=BA=
=8B=E5=8A=A1=E3=80=82</p><div><br/></div><div style=3D"box-sizing: =
border-box; font-family: inherit; color: inherit; margin-top: 20px; =
margin-bottom: 10px; padding: 10px 0px; font-weight: 500; font-size: =
19px;"><div>=E4=B8=89=E3=80=81<span style=3D"color: rgb(106, 0, =
129);">=E7=AE=A1=E9=81=93(Pipelining)</span></div></div><div =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;"><div>=E6=9C=89=E6=97=B6=EF=BC=8C=E6=88=91=E4=BB=AC=E9=9C=80=E8=A6=81=
=E9=87=87=E7=94=A8=E5=BC=82=E6=AD=A5=E6=96=B9=E5=BC=8F=EF=BC=8C<span =
style=3D"color: rgb(106, 0, =
129);">=E4=B8=80=E6=AC=A1=E5=8F=91=E9=80=81=E5=A4=9A=E4=B8=AA=E6=8C=87=E4=
=BB=A4=EF=BC=8C=E4=B8=8D=E5=90=8C=E6=AD=A5=E7=AD=89=E5=BE=85=E5=85=B6=E8=BF=
=94=E5=9B=9E=E7=BB=93=E6=9E=9C=EF=BC=88=E5=8D=B3set=E5=90=8E=E9=A9=AC=E4=B8=
=8A=E8=BF=94=E5=9B=9E=E7=9A=84=E4=B8=8D=E5=83=8F=E4=B8=8A=E5=A4=B4=E7=9A=84=
=E7=AD=89=E7=BB=93=E6=9E=9C=EF=BC=89=E3=80=82</span>=E8=BF=99=E6=A0=B7=E5=
=8F=AF=E4=BB=A5=E5=8F=96=E5=BE=97=E9=9D=9E=E5=B8=B8=E5=A5=BD=E7=9A=84=E6=89=
=A7=E8=A1=8C=E6=95=88=E7=8E=87=E3=80=82=E8=BF=99=E5=B0=B1=E6=98=AF=E7=AE=A1=
=E9=81=93=EF=BC=8C=E8=B0=83=E7=94=A8=E6=96=B9=E6=B3=95=E5=A6=82=E4=B8=8B=EF=
=BC=9A</div></div><div style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test3Pipelined() {=0A        Jedis jedis =3D new =
Jedis(&quot;localhost&quot;);=0A        Pipeline <span style=3D"color: =
rgb(106, 0, 129);">pipeline </span>=3D jedis.pipelined();=0A        long =
start =3D System.currentTimeMillis();=0A        for (int i =3D 0; i &lt; =
100000; i++) {=0A            pipeline.set(&quot;p&quot; + i, =
&quot;p&quot; + i);=0A        }=0A        List&lt;Object&gt; results =3D =
<span style=3D"background-color: rgb(255, 250, =
165);-evernote-highlight:true;"><span style=3D"color: rgb(106, 0, =
129);">pipeline.syncAndReturnAll();</span></span>=0A        long end =3D =
System.currentTimeMillis();=0A        System.out.println(&quot;Pipelined =
SET: &quot; + ((end - start)/1000.0) + &quot; seconds&quot;);=0A        =
jedis.disconnect();=0A}=0A</code></pre></div><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E5=9B=9B=E3=80=81<span style=3D"color: rgb(106, 0, =
129);">=E7=AE=A1=E9=81=93=E4=B8=AD</span><span style=3D"color: rgb(50, =
135, 18);">=E8=B0=83=E7=94=A8=E4=BA=8B=E5=8A=A1</span></h3><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=B0=B1Jedis=E6=8F=90=E4=BE=9B=E7=9A=84=E6=96=B9=E6=B3=95=E8=80=8C=
=E8=A8=80=EF=BC=8C=E6=98=AF=E5=8F=AF=E4=BB=A5=E5=81=9A=E5=88=B0=E5=9C=A8=E7=
=AE=A1=E9=81=93=E4=B8=AD=E4=BD=BF=E7=94=A8=E4=BA=8B=E5=8A=A1=EF=BC=8C=E5=85=
=B6=E4=BB=A3=E7=A0=81=E5=A6=82=E4=B8=8B=EF=BC=9A</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test4combPipelineTrans() {=0A        jedis =3D new =
Jedis(&quot;localhost&quot;); =0A        long start =3D =
System.currentTimeMillis();=0A        Pipeline <span style=3D"color: =
rgb(106, 0, 129);">pipeline </span>=3D jedis.pipelined();=0A        =
<span style=3D"color: rgb(106, 0, 129);">pipeline</span><span =
style=3D"color: rgb(50, 135, 18);">.multi();</span>=0A        for (int i =
=3D 0; i &lt; 100000; i++) {=0A            pipeline.set(&quot;&quot; + =
i, &quot;&quot; + i);=0A        }=0A        <span style=3D"color: =
rgb(106, 0, 129);">pipeline</span>.<span style=3D"color: rgb(50, 135, =
18);">exec();</span>=0A        List&lt;Object&gt; results =3D <span =
style=3D"color: rgb(106, 0, =
129);">pipeline.syncAndReturnAll();</span>=0A        long end =3D =
System.currentTimeMillis();=0A        System.out.println(&quot;Pipelined =
transaction: &quot; + ((end - start)/1000.0) + &quot; seconds&quot;);=0A =
       jedis.disconnect();=0A}=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E4=BD=86=E6=98=AF=E7=BB=8F=E6=B5=8B=E8=AF=95=EF=BC=88=E8=A7=81=E6=
=9C=AC=E6=96=87=E5=90=8E=E7=BB=AD=E9=83=A8=E5=88=86=EF=BC=89=EF=BC=8C<spa=
n style=3D"color: rgb(173, 0, =
0);">=E5=8F=91=E7=8E=B0=E5=85=B6=E6=95=88=E7=8E=87=E5=92=8C=E5=8D=95=E7=8B=
=AC=E4=BD=BF=E7=94=A8=E4=BA=8B=E5=8A=A1=E5=B7=AE=E4=B8=8D=E5=A4=9A=EF=BC=8C=
=E7=94=9A=E8=87=B3=E8=BF=98=E7=95=A5=E5=BE=AE=E5=B7=AE=E7=82=B9</span>=E3=
=80=82</p><div><br/></div><div style=3D"box-sizing: border-box; =
font-family: inherit; color: inherit; margin-top: 20px; margin-bottom: =
10px; padding: 10px 0px; font-weight: 500; font-size: =
19px;"><div>=E4=BA=94=E3=80=81=E5=88=86=E5=B8=83=E5=BC=8F=E7=9B=B4=E8=BF=9E=
=E5=90=8C=E6=AD=A5=E8=B0=83=E7=94=A8=EF=BC=88=E5=A4=9A=E4=B8=AAredis=E9=9B=
=86=E7=BE=A4?=EF=BC=89</div></div><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test5shardNormal() {=0A        List&lt;JedisShardInfo&gt; <span =
style=3D"color: rgb(28, 51, 135);">shards </span>=3D Arrays.asList(=0A   =
                     new JedisShardInfo(&quot;localhost&quot;,6379),=0A  =
                      new =
JedisShardInfo(&quot;localhost&quot;,6380));=0A                        =
=0A        <span style=3D"color: rgb(20, 113, 145);"><b>ShardedJedis =
sharding </b></span>=3D new ShardedJedis(<span style=3D"color: rgb(28, =
51, 135);">shards</span>);=0A        =0A        long start =3D =
System.currentTimeMillis();=0A        for (int i =3D 0; i &lt; 100000; =
i++) {=0A            String result =3D <b><span style=3D"color: rgb(20, =
113, 145);">sharding</span></b>.set(&quot;sn&quot; + i, &quot;n&quot; + =
i);=0A        }=0A        long end =3D System.currentTimeMillis();=0A    =
    System.out.println(&quot;Simple@Sharing SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        =0A        =
sharding.disconnect();=0A}=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E8=BF=99=E4=B8=AA=E6=98=AF=E5=88=86=E5=B8=83=E5=BC=8F=E7=9B=B4=E6=
=8E=A5=E8=BF=9E=E6=8E=A5=EF=BC=8C=E5=B9=B6=E4=B8=94=E6=98=AF=E5=90=8C=E6=AD=
=A5=E8=B0=83=E7=94=A8=EF=BC=8C=E6=AF=8F=E6=AD=A5=E6=89=A7=E8=A1=8C=E9=83=BD=
=E8=BF=94=E5=9B=9E=E6=89=A7=E8=A1=8C=E7=BB=93=E6=9E=9C=E3=80=82=E7=B1=BB=E4=
=BC=BC=E5=9C=B0=EF=BC=8C=E8=BF=98=E6=9C=89=E5=BC=82=E6=AD=A5=E7=AE=A1=E9=81=
=93=E8=B0=83=E7=94=A8=E3=80=82</p><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E5=85=AD=E3=80=81=E5=88=86=E5=B8=83=E5=BC=8F=E7=9B=B4=E8=BF=9E=E5=BC=
=82=E6=AD=A5=E8=B0=83=E7=94=A8</h3><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test6shardpipelined() {=0A        List&lt;JedisShardInfo&gt; shards =3D =
Arrays.asList(=0A                        new =
JedisShardInfo(&quot;localhost&quot;,6379),=0A                        =
new JedisShardInfo(&quot;localhost&quot;,6380));=0A                      =
  =0A        ShardedJedis sharding =3D new ShardedJedis(shards);=0A      =
  =0A        ShardedJedisPipeline <span style=3D"color: rgb(106, 0, =
129);">pipeline </span>=3D <b><span style=3D"color: rgb(20, 113, =
145);">sharding</span></b>.<span style=3D"color: rgb(106, 0, =
129);">pipelined();</span>=0A        long start =3D =
System.currentTimeMillis();=0A        for (int i =3D 0; i &lt; 100000; =
i++) {=0A            pipeline.set(&quot;sp&quot; + i, &quot;p&quot; + =
i);=0A        }=0A        List&lt;Object&gt; results =3D <span =
style=3D"color: rgb(106, 0, =
129);">pipeline.syncAndReturnAll();</span>=0A        long end =3D =
System.currentTimeMillis();=0A        =
System.out.println(&quot;Pipelined@Sharing SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        =0A        =
sharding.disconnect();=0A}=0A</code></pre></div><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E4=B8=83=E3=80=81=E5=88=86=E5=B8=83=E5=BC=8F=E8=BF=9E=E6=8E=A5=E6=B1=
=A0=E5=90=8C=E6=AD=A5=E8=B0=83=E7=94=A8</h3><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=A6=82=E6=9E=9C=EF=BC=8C=E4=BD=A0=E7=9A=84=E5=88=86=E5=B8=83=E5=
=BC=8F=E8=B0=83=E7=94=A8=E4=BB=A3=E7=A0=81=E6=98=AF=E8=BF=90=E8=A1=8C=E5=9C=
=A8=E7=BA=BF=E7=A8=8B=E4=B8=AD=EF=BC=8C=E9=82=A3=E4=B9=88=E4=B8=8A=E9=9D=A2=
=E4=B8=A4=E4=B8=AA=E7=9B=B4=E8=BF=9E=E8=B0=83=E7=94=A8=E6=96=B9=E5=BC=8F=E5=
=B0=B1=E4=B8=8D=E5=90=88=E9=80=82=E4=BA=86=EF=BC=8C=E5=9B=A0=E4=B8=BA=E7=9B=
=B4=E8=BF=9E=E6=96=B9=E5=BC=8F=E6=98=AF=E9=9D=9E=E7=BA=BF=E7=A8=8B=E5=AE=89=
=E5=85=A8=E7=9A=84=EF=BC=8C=E8=BF=99=E4=B8=AA=E6=97=B6=E5=80=99=EF=BC=8C=E4=
=BD=A0=E5=B0=B1=E5=BF=85=E9=A1=BB=E9=80=89=E6=8B=A9=E8=BF=9E=E6=8E=A5=E6=B1=
=A0=E8=B0=83=E7=94=A8=E3=80=82</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test7shardSimplePool() {=0A        List&lt;JedisShardInfo&gt; shards =3D =
Arrays.asList(=0A                        new =
JedisShardInfo(&quot;localhost&quot;,6379),=0A                        =
new JedisShardInfo(&quot;localhost&quot;,6380));=0A=0A        =
ShardedJedisPool pool =3D new <span style=3D"color: rgb(79, 0, =
154);">ShardedJedisPool</span>(new JedisPoolConfig(), shards);=0A=0A     =
   ShardedJedis one =3D pool.getResource();=0A        =0A        long =
start =3D System.currentTimeMillis();=0A        for (int i =3D 0; i &lt; =
100000; i++) {=0A            String result =3D one.set(&quot;spn&quot; + =
i, &quot;n&quot; + i);=0A        }=0A        long end =3D =
System.currentTimeMillis();=0A        pool.returnResource(one);=0A       =
 System.out.println(&quot;Simple@Pool SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        =0A        =
pool.destroy();=0A}=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E4=B8=8A=E9=9D=A2=E6=98=AF=E5=90=8C=E6=AD=A5=E6=96=B9=E5=BC=8F=EF=
=BC=8C=E5=BD=93=E7=84=B6=E8=BF=98=E6=9C=89=E5=BC=82=E6=AD=A5=E6=96=B9=E5=BC=
=8F=E3=80=82</p><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E5=85=AB=E3=80=81=E5=88=86=E5=B8=83=E5=BC=8F=E8=BF=9E=E6=8E=A5=E6=B1=
=A0=E5=BC=82=E6=AD=A5=E8=B0=83=E7=94=A8</h3><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">@Test=0Apublic void =
test8shardPipelinedPool() {=0A        List&lt;JedisShardInfo&gt; shards =
=3D Arrays.asList(=0A                        new =
JedisShardInfo(&quot;localhost&quot;,6379),=0A                        =
new JedisShardInfo(&quot;localhost&quot;,6380));=0A=0A        =
ShardedJedisPool pool =3D new ShardedJedisPool(new JedisPoolConfig(), =
shards);=0A=0A        ShardedJedis one =3D pool.getResource();=0A        =
=0A        ShardedJedisPipeline pipeline =3D <span style=3D"color: =
rgb(106, 0, 129);">one.pipelined();</span>=0A        =0A        long =
start =3D System.currentTimeMillis();=0A        for (int i =3D 0; i &lt; =
100000; i++) {=0A            pipeline.set(&quot;sppn&quot; + i, =
&quot;n&quot; + i);=0A        }=0A        List&lt;Object&gt; results =3D =
pipeline.syncAndReturnAll();=0A        long end =3D =
System.currentTimeMillis();=0A        pool.returnResource(one);=0A       =
 System.out.println(&quot;Pipelined@Pool SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        =
pool.destroy();=0A}=0A</code></pre></div><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E4=B9=9D=E3=80=81=E9=9C=80=E8=A6=81=E6=B3=A8=E6=84=8F=E7=9A=84=E5=9C=
=B0=E6=96=B9</h3><ol =
style=3D"box-sizing:border-box;margin-top:0px;margin-bottom:10px;"><li =
style=3D"box-sizing:border-box;"><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;"><b>=E4=BA=8B=E5=8A=A1=E5=92=8C=E7=AE=A1=E9=81=93=E9=83=BD=E6=98=AF=
<span style=3D"color: rgb(20, 113, =
145);">=E5=BC=82=E6=AD=A5=E6=A8=A1=E5=BC=8F</span></b>=E3=80=82=E5=9C=A8=E4=
=BA=8B=E5=8A=A1=E5=92=8C=E7=AE=A1=E9=81=93=E4=B8=AD=E4=B8=8D=E8=83=BD=E5=90=
=8C=E6=AD=A5=E6=9F=A5=E8=AF=A2=E7=BB=93=E6=9E=9C=E3=80=82=E6=AF=94=E5=A6=82=
=E4=B8=8B=E9=9D=A2=E4=B8=A4=E4=B8=AA=E8=B0=83=E7=94=A8=EF=BC=8C=E9=83=BD=E6=
=98=AF=E4=B8=8D=E5=85=81=E8=AE=B8=E7=9A=84=EF=BC=9A</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;"> Transaction tx =3D =
jedis.multi();=0A for (int i =3D 0; i &lt; 100000; i++) {=0A     =
tx.set(&quot;t&quot; + i, &quot;t&quot; + i);=0A }=0A =
System.out.println(tx.get(&quot;t1000&quot;).get());  =
//=E4=B8=8D=E5=85=81=E8=AE=B8=0A        =0A List&lt;Object&gt; results =
=3D tx.exec();=0A        =0A =E2=80=A6=0A =E2=80=A6=0A        =0A =
Pipeline pipeline =3D jedis.pipelined();=0A long start =3D =
System.currentTimeMillis();=0A for (int i =3D 0; i &lt; 100000; i++) =
{=0A     pipeline.set(&quot;p&quot; + i, &quot;p&quot; + i);=0A }=0A =
System.out.println(pipeline.get(&quot;p1000&quot;).get()); =
//=E4=B8=8D=E5=85=81=E8=AE=B8=0A        =0A List&lt;Object&gt; results =
=3D pipeline.syncAndReturnAll();=0A</code></pre></div></li><li =
style=3D"box-sizing:border-box;"><span style=3D"color: rgb(28, 51, =
135);">=E4=BA=8B=E5=8A=A1=E5=92=8C=E7=AE=A1=E9=81=93=E9=83=BD=E6=98=AF=E5=
=BC=82=E6=AD=A5=E7=9A=84=EF=BC=8C=E4=B8=AA=E4=BA=BA=E6=84=9F=E8=A7=89=EF=BC=
=8C=E5=9C=A8=E7=AE=A1=E9=81=93=E4=B8=AD=E5=86=8D=E8=BF=9B=E8=A1=8C=E4=BA=8B=
=E5=8A=A1=E8=B0=83=E7=94=A8=EF=BC=8C=E6=B2=A1=E6=9C=89=E5=BF=85=E8=A6=81=EF=
=BC=8C=E4=B8=8D=E5=A6=82<b>=E7=9B=B4=E6=8E=A5=E8=BF=9B=E8=A1=8C=E4=BA=8B=E5=
=8A=A1=E6=A8=A1=E5=BC=8F</b>=E3=80=82</span></li><li =
style=3D"box-sizing:border-box;"><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=88=86=E5=B8=83=E5=BC=8F=E4=B8=AD=EF=BC=8C<span =
style=3D"color: rgb(50, 135, =
18);">=E8=BF=9E=E6=8E=A5=E6=B1=A0=E7=9A=84=E6=80=A7=E8=83=BD=E6=AF=94=E7=9B=
=B4=E8=BF=9E=E7=9A=84=E6=80=A7=E8=83=BD=E7=95=A5=E5=A5=BD</span>(=E8=A7=81=
=E5=90=8E=E7=BB=AD=E6=B5=8B=E8=AF=95=E9=83=A8=E5=88=86)=E3=80=82</p></li>=
<li style=3D"box-sizing:border-box;"><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=88=86=E5=B8=83=E5=BC=8F=E8=B0=83=E7=94=A8=E4=B8=AD=E4=B8=8D=E6=
=94=AF=E6=8C=81=E4=BA=8B=E5=8A=A1=E3=80=82</p><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=9B=A0=E4=B8=BA=E4=BA=8B=E5=8A=A1=E6=98=AF=E5=9C=A8=E6=9C=8D=E5=
=8A=A1=E5=99=A8=E7=AB=AF=E5=AE=9E=E7=8E=B0=EF=BC=8C=E8=80=8C=E5=9C=A8=E5=88=
=86=E5=B8=83=E5=BC=8F=E4=B8=AD=EF=BC=8C=E6=AF=8F=E6=89=B9=E6=AC=A1=E7=9A=84=
=E8=B0=83=E7=94=A8=E5=AF=B9=E8=B1=A1=E9=83=BD=E5=8F=AF=E8=83=BD=E8=AE=BF=E9=
=97=AE=E4=B8=8D=E5=90=8C=E7=9A=84=E6=9C=BA=E5=99=A8=EF=BC=8C=E6=89=80=E4=BB=
=A5=EF=BC=8C=E6=B2=A1=E6=B3=95=E8=BF=9B=E8=A1=8C=E4=BA=8B=E5=8A=A1=E3=80=82=
</p></li></ol><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E5=8D=81=E3=80=81=E6=B5=8B=E8=AF=95</h3><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E8=BF=90=E8=A1=8C=E4=B8=8A=E9=9D=A2=E7=9A=84=E4=BB=A3=E7=A0=81=EF=
=BC=8C=E8=BF=9B=E8=A1=8C=E6=B5=8B=E8=AF=95=EF=BC=8C=E5=85=B6=E7=BB=93=E6=9E=
=9C=E5=A6=82=E4=B8=8B=EF=BC=9A</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">Simple SET: 5.227 =
seconds=0A=0ATransaction SET: 0.5 seconds=0APipelined SET: 0.353 =
seconds=0APipelined transaction: 0.509 seconds=0A=0ASimple@Sharing SET: =
5.289 seconds=0APipelined@Sharing SET: 0.348 seconds=0A=0ASimple@Pool =
SET: 5.039 seconds=0APipelined@Pool SET: 0.401 =
seconds=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=8F=A6=E5=A4=96=EF=BC=8C=E7=BB=8F=E6=B5=8B=E8=AF=95=E5=88=86=E5=
=B8=83=E5=BC=8F=E4=B8=AD=E7=94=A8=E5=88=B0=E7=9A=84=E6=9C=BA=E5=99=A8=E8=B6=
=8A=E5=A4=9A=EF=BC=8C=E8=B0=83=E7=94=A8=E4=BC=9A=E8=B6=8A=E6=85=A2=E3=80=82=
=E4=B8=8A=E9=9D=A2=E6=98=AF2=E7=89=87=EF=BC=8C=E4=B8=8B=E9=9D=A2=E6=98=AF=
5=E7=89=87=EF=BC=9A</p><div style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">Simple@Sharing SET: =
5.494 seconds=0APipelined@Sharing SET: 0.51 seconds=0ASimple@Pool SET: =
5.223 seconds=0APipelined@Pool SET: 0.518 =
seconds=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E4=B8=8B=E9=9D=A2=E6=98=AF10=E7=89=87=EF=BC=9A</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">Simple@Sharing SET: =
5.9 seconds=0APipelined@Sharing SET: 0.794 seconds=0ASimple@Pool SET: =
5.624 seconds=0APipelined@Pool SET: 0.762 =
seconds=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E4=B8=8B=E9=9D=A2=E6=98=AF100=E7=89=87=EF=BC=9A</p><div =
style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">Simple@Sharing SET: =
14.055 seconds=0APipelined@Sharing SET: 8.185 seconds=0ASimple@Pool SET: =
13.29 seconds=0APipelined@Pool SET: 7.767 =
seconds=0A</code></pre></div><p =
style=3D"box-sizing:border-box;margin:0px 0px =
10px;">=E5=88=86=E5=B8=83=E5=BC=8F=E4=B8=AD=EF=BC=8C=E8=BF=9E=E6=8E=A5=E6=
=B1=A0=E6=96=B9=E5=BC=8F=E8=B0=83=E7=94=A8=E4=B8=8D=E4=BD=86=E7=BA=BF=E7=A8=
=8B=E5=AE=89=E5=85=A8=E5=A4=96=EF=BC=8C=E6=A0=B9=E6=8D=AE=E4=B8=8A=E9=9D=A2=
=E7=9A=84=E6=B5=8B=E8=AF=95=E6=95=B0=E6=8D=AE=EF=BC=8C=E4=B9=9F=E5=8F=AF=E4=
=BB=A5=E7=9C=8B=E5=87=BA<span style=3D"color: rgb(106, 0, =
129);">=E8=BF=9E=E6=8E=A5=E6=B1=A0=E6=AF=94=E7=9B=B4=E8=BF=9E=E7=9A=84=E6=
=95=88=E7=8E=87=E6=9B=B4=E5=A5=BD</span>=E3=80=82</p><h3 =
style=3D"box-sizing:border-box;font-family:inherit;font-weight:500;color:=
inherit;margin-top:20px;margin-bottom:10px;font-size:19px;padding:10px =
0px;">=E5=8D=81=E4=B8=80=E3=80=81=E5=AE=8C=E6=95=B4=E7=9A=84=E6=B5=8B=E8=AF=
=95=E4=BB=A3=E7=A0=81</h3><div style=3D"box-sizing:border-box;"><pre =
style=3D"overflow:auto;font-size:13px;box-sizing:border-box;display:block=
;padding:9.5px;margin:0px 0px 10px;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, monospace;color:rgb(51, 51, =
51);word-break:break-all;word-wrap:break-word;border:1px solid rgb(204, =
204, 204);border-radius:4px;background-color:rgb(245, 245, 245);"><code =
style=3D"box-sizing:border-box;font-family:Menlo, Monaco, Consolas, =
&quot;Courier New&quot;, =
monospace;font-size:inherit;padding:0px;color:inherit;border-radius:0px;b=
ackground-color:transparent;white-space:pre-wrap;">package =
com.example.nosqlclient;=0A=0Aimport java.util.Arrays;=0Aimport =
java.util.List;=0A=0Aimport org.junit.AfterClass;=0Aimport =
org.junit.BeforeClass;=0Aimport org.junit.Test;=0A=0Aimport =
redis.clients.jedis.Jedis;=0Aimport =
redis.clients.jedis.JedisPoolConfig;=0Aimport =
redis.clients.jedis.JedisShardInfo;=0Aimport =
redis.clients.jedis.Pipeline;=0Aimport =
redis.clients.jedis.ShardedJedis;=0Aimport =
redis.clients.jedis.ShardedJedisPipeline;=0Aimport =
redis.clients.jedis.ShardedJedisPool;=0Aimport =
redis.clients.jedis.Transaction;=0A=0Aimport =
org.junit.FixMethodOrder;=0Aimport =
org.junit.runners.MethodSorters;=0A=0A@FixMethodOrder(MethodSorters.NAME_=
ASCENDING)=0Apublic class TestJedis {=0A=0A        private static Jedis =
jedis;=0A        private static ShardedJedis sharding;=0A        private =
static ShardedJedisPool pool;=0A        =0A        @BeforeClass=0A       =
 public static void setUpBeforeClass() throws Exception {=0A             =
   List&lt;JedisShardInfo&gt; shards =3D Arrays.asList(=0A               =
                 new JedisShardInfo(&quot;localhost&quot;,6379),=0A      =
                          new =
JedisShardInfo(&quot;localhost&quot;,6379)); =
//=E4=BD=BF=E7=94=A8=E7=9B=B8=E5=90=8C=E7=9A=84ip:port,=E4=BB=85=E4=BD=9C=
=E6=B5=8B=E8=AF=95=0A                =0A                =0A              =
  jedis =3D new Jedis(&quot;localhost&quot;); =0A                =
sharding =3D new ShardedJedis(shards);=0A                =0A             =
   pool =3D new ShardedJedisPool(new JedisPoolConfig(), shards);=0A      =
  }=0A=0A        @AfterClass=0A        public static void =
tearDownAfterClass() throws Exception {=0A                =
jedis.disconnect();=0A                sharding.disconnect();=0A          =
      pool.destroy();=0A        }=0A=0A        @Test=0A        public =
void test1Normal() {=0A                long start =3D =
System.currentTimeMillis();=0A                for (int i =3D 0; i &lt; =
100000; i++) {=0A                        String result =3D =
jedis.set(&quot;n&quot; + i, &quot;n&quot; + i);=0A                }=0A  =
              long end =3D System.currentTimeMillis();=0A                =
System.out.println(&quot;Simple SET: &quot; + ((end - start)/1000.0) + =
&quot; seconds&quot;);=0A        }=0A        =0A        @Test=0A        =
public void test2Trans() {=0A                long start =3D =
System.currentTimeMillis();=0A                Transaction tx =3D =
jedis.multi();=0A                for (int i =3D 0; i &lt; 100000; i++) =
{=0A                        tx.set(&quot;t&quot; + i, &quot;t&quot; + =
i);=0A                }=0A                =
//System.out.println(tx.get(&quot;t1000&quot;).get());=0A                =
=0A                List&lt;Object&gt; results =3D tx.exec();=0A          =
      long end =3D System.currentTimeMillis();=0A                =
System.out.println(&quot;Transaction SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        }=0A        =0A        =
@Test=0A        public void test3Pipelined() {=0A                =
Pipeline pipeline =3D jedis.pipelined();=0A                long start =
=3D System.currentTimeMillis();=0A                for (int i =3D 0; i =
&lt; 100000; i++) {=0A                        pipeline.set(&quot;p&quot; =
+ i, &quot;p&quot; + i);=0A                }=0A                =
//System.out.println(pipeline.get(&quot;p1000&quot;).get());=0A          =
      List&lt;Object&gt; results =3D pipeline.syncAndReturnAll();=0A     =
           long end =3D System.currentTimeMillis();=0A                =
System.out.println(&quot;Pipelined SET: &quot; + ((end - start)/1000.0) =
+ &quot; seconds&quot;);=0A        }=0A        =0A        @Test=0A       =
 public void test4combPipelineTrans() {=0A                long start =3D =
System.currentTimeMillis();=0A                Pipeline pipeline =3D =
jedis.pipelined();=0A                pipeline.multi();=0A                =
for (int i =3D 0; i &lt; 100000; i++) {=0A                        =
pipeline.set(&quot;&quot; + i, &quot;&quot; + i);=0A                }=0A =
               pipeline.exec();=0A                List&lt;Object&gt; =
results =3D pipeline.syncAndReturnAll();=0A                long end =3D =
System.currentTimeMillis();=0A                =
System.out.println(&quot;Pipelined transaction: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        }=0A=0A        =
@Test=0A        public void test5shardNormal() {=0A                long =
start =3D System.currentTimeMillis();=0A                for (int i =3D =
0; i &lt; 100000; i++) {=0A                        String result =3D =
sharding.set(&quot;sn&quot; + i, &quot;n&quot; + i);=0A                =
}=0A                long end =3D System.currentTimeMillis();=0A          =
      System.out.println(&quot;Simple@Sharing SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        }=0A        =0A        =
@Test=0A        public void test6shardpipelined() {=0A                =
ShardedJedisPipeline pipeline =3D sharding.pipelined();=0A               =
 long start =3D System.currentTimeMillis();=0A                for (int i =
=3D 0; i &lt; 100000; i++) {=0A                        =
pipeline.set(&quot;sp&quot; + i, &quot;p&quot; + i);=0A                =
}=0A                List&lt;Object&gt; results =3D =
pipeline.syncAndReturnAll();=0A                long end =3D =
System.currentTimeMillis();=0A                =
System.out.println(&quot;Pipelined@Sharing SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        }=0A        =0A        =
@Test=0A        public void test7shardSimplePool() {=0A                =
ShardedJedis one =3D pool.getResource();=0A                =0A           =
     long start =3D System.currentTimeMillis();=0A                for =
(int i =3D 0; i &lt; 100000; i++) {=0A                        String =
result =3D one.set(&quot;spn&quot; + i, &quot;n&quot; + i);=0A           =
     }=0A                long end =3D System.currentTimeMillis();=0A     =
           pool.returnResource(one);=0A                =
System.out.println(&quot;Simple@Pool SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        }=0A        =0A        =
@Test=0A        public void test8shardPipelinedPool() {=0A               =
 ShardedJedis one =3D pool.getResource();=0A                =0A          =
      ShardedJedisPipeline pipeline =3D one.pipelined();=0A              =
  =0A                long start =3D System.currentTimeMillis();=0A       =
         for (int i =3D 0; i &lt; 100000; i++) {=0A                      =
  pipeline.set(&quot;sppn&quot; + i, &quot;n&quot; + i);=0A              =
  }=0A                List&lt;Object&gt; results =3D =
pipeline.syncAndReturnAll();=0A                long end =3D =
System.currentTimeMillis();=0A                =
pool.returnResource(one);=0A                =
System.out.println(&quot;Pipelined@Pool SET: &quot; + ((end - =
start)/1000.0) + &quot; seconds&quot;);=0A        =
}=0A}=0A</code></pre></div></div></div></div></div></div></div></div></di=
v></div></div></div><div =
style=3D"-evernote-webclip:true"><br/></div></span>=0A</div></body></html=
>
 